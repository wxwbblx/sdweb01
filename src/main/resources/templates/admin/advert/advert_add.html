<!doctype html>
<html lang="en">
<meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <link rel="stylesheet" type="text/css" href="../../bs3/css/style.css" />
<link rel="stylesheet" type="text/css" href="../../bs3/css/WdatePicker.css" />
<link rel="stylesheet" type="text/css" href="../../bs3/css/skin_/form.css" />
<link href="umeditor/themes/default/_css/umeditor.css" type="text/css" rel="stylesheet">

<link rel="stylesheet" type="text/css" href="../../bs3/css/jquery.grid.css" />
<link rel="stylesheet" type="text/css" href="../../bs/css/bootstrap.min.css">

<script type="text/javascript" src="../../bs3/js/jquery.js"></script>
<script type="text/javascript" src="../../bs3/js/global.js"></script>
<script type="text/javascript" src="../../bs3/js/jquery.select.js"></script>
<script type="text/javascript" src="../../bs3/js/WdatePicker.js"></script>
<script type="text/javascript">
window.UMEDITOR_HOME_URL = 'umeditor/';  // 请换成绝对路径
</script>
<script type="text/javascript" src="../../bs3/js/umeditor.config.js"></script>
<script type="text/javascript" src="../../bs3/js/editor_api.js"></script>
<script type="text/javascript" src="../../bs3/umeditor/lang/zh-cn/zh-cn.js"></script>
<title th:text="${title}">a</title>
</head>

<body>
<div id="container">
	<div id="hd">
    </div>
    <div id="bd">
	    <form class="form-signin" role="form" action="/admin/ad/add" enctype="multipart/form-data" method="post">
	    	<div id="main">
	            <h2 class="subfild">
	            	<span>广告编辑</span>
	            </h2>            
	            <div class="subfild-content base-info">
	            	<div class="kv-item ue-clear">
	                	<label><span class="impInfo">*</span>广告名称</label>
	                	<div class="kv-item-content">
	                    	<input type="text" placeholder="广告名称" name="adname" maxlength="30" />
	                    </div>
	                    <span class="kv-item-tip">广告名称字数限制在30个字符</span>
	                </div>
	                <div class="kv-item ue-clear">
	                	<label><span class="impInfo">*</span>广告标题</label>
	                	<div class="kv-item-content">
	                    	<input type="text" placeholder="广告标题" name="adtitle"  maxlength="35" />
	                    </div>
	                    <span class="kv-item-tip">广告标题字数限制在35个字符</span>
	                </div>
	                <div class="kv-item ue-clear">
	                	<label>展现类型</label>
	                	<div class="kv-item-content">
	                    	<select name="adtype">
	                        	<option>图片</option>
	                            <option>视频</option>
	                        </select>
	                    </div>
	                    <span class="kv-item-tip success">成功信息</span>
	                </div>
	                <div class="kv-item ue-clear time">
	                	<label><span class="impInfo">*</span>播放日期</label>
	                	<div class="kv-item-content">
	                    	<input type="text" placeholder="播放日期" onfocus="WdatePicker({dateFmt:'yyyy-MM-dd'})" name="adtime"/>
	                        <i class="time-icon"></i>
	                    </div>
	                    <span class="kv-item-tip error">这是一个错误信息</span>
	                </div>
	                               
	                <div class="kv-item ue-clear">
	                	<label>所在位置</label>
	                	<div class="kv-item-content">
	                    	<select name="adpage">
	                        	<option>首页</option>
	                            <option>次级页面</option>
	                        </select>
	                    </div>
	                    <span class="kv-item-tip success">成功信息</span>
	                </div>
	                
	                <div class="kv-item ue-clear">
	                	<label>是否启用</label>
	                	<div class="kv-item-content">
	                    	<span class="choose">
	                            <span class="checkboxouter">
	                                <input type="radio" name="isenable"  value="1"/>
	                                <span class="radio"></span>
	                            </span>
	                            <span class="text">是</span>
	                        </span>
	                    	<span class="choose">
	                            <span class="checkboxouter">
	                                <input type="radio" name="isenable" value="0"/>
	                                <span class="radio"></span>
	                            </span>
	                            <span class="text">否</span>
	                        </span>
	                        
	                    </div>
	                    <span class="kv-item-tip">标题字数限制在35个字符</span>
	                </div>
	                
	                <!--  
	                <div class="kv-item ue-clear">
	                	<label><span class="impInfo">*</span>广告内容上传</label>
	                	<div class="kv-item-content file">
							<span class="text"></span>
	                        <input type="file"  name="file" />
	                        <input type="button" class="button normal long2" value="浏览.." />
	                    </div>
	                    <span class="kv-item-tip">标题字数限制在35个字符</span>
	                </div>-->
	            </div>
	            <h2 class="subfild">
	            	<span>广告内容</span>
	            </h2>
	            <div class="subfild-content remarkes-info">
	            	 <div class="kv-item ue-clear">
	                	<label>图片预览</label>
	                	<div class="kv-item-content">
	                    	<img border="1" src="../../images/1.jpg"  width="400" height="400" alt="图片预览" />
	                    </div>
	                    <span class="kv-item-tip success">成功信息</span>
	                </div>
	            	<div class="kv-item ue-clear">
	                	<label><span class="impInfo">*</span>广告内容</label>
	                	<div class="kv-item-content file">
							<span class="text"></span>
	                        <input type="file"  name="file" />
	                        <input type="button" class="button normal long2" value="浏览.." onchange = "selectFile()"/>
	                    </div>
	                    <span class="kv-item-tip">标题字数限制在35个字符</span>
	                </div>
	            </div>
	            
	            <h2 class="subfild">
	            	<span>备注资料</span>
	            </h2>
	            
	            <div class="subfild-content remarkes-info">
	            	<div class="kv-item ue-clear">
	                	<label><span class="impInfo">*</span>备注资料</label>
	                	<div class="kv-item-content">
	                    	<textarea placeholder="备注资料" id="remark" name="remark" style="width:400px;height:100px;" ></textarea>
	                    </div>
	                </div>
	            </div>
	           
	            <h2 class="subfild">
	            	<span></span>
	            </h2>
	            
	            <div class="buttons">
	                <input class="button" type="submit" value="提交" onclick="/admin/prog_add" /> 
	                <a class="button btn btn-primary" href="/admin/ad/load;" >返回</a>
	            </div>
	            
	        </div>
         </form>
    </div>
    
</div>
 <script type="text/javascript">
        //var files = document.getElementById('pic').files;
        var form = new FormData();//通过HTML表单创建FormData对象
        var url = '127.0.0.1:8080/'
        function selectFile(){
            var files = document.getElementById('pic').files;
            console.log(files[0]);
            if(files.length == 0){
                return;
            }
            var file = files[0];
            //把上传的图片显示出来
            var reader = new FileReader();
            // 将文件以Data URL形式进行读入页面
            console.log(reader);
            reader.readAsBinaryString(file);
            reader.onload = function(f){
                var result = document.getElementById("result");
                var src = "data:" + file.type + ";base64," + window.btoa(this.result);
                result.innerHTML = '<img src ="'+src+'"/>';
            }
            console.log('file',file);
            ///////////////////
            form.append('file',file);
            console.log(form.get('file'));
        }
        //var xhr = new XMLHttpRequest();
        // function handIn(){
        //  console.log(form.get('file'));
        //  xhr.open("post", url, true);
        //  xhr.addEventListener("readystatechange", function() {  
        //      var result = xhr;  
        //      if (result.status != 200) { //error  
        //          console.log('上传失败', result.status, result.statusText, result.response);  
        //      }   
        //      else if (result.readyState == 4) { //finished  
        //          console.log('上传成功', result);  
        //      }  
        //  });   
        // }
    </script>
</body>
</html>
