<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus®">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <link rel="stylesheet" type="text/css" href="../../bs3/css/style.css" />
  <link rel="stylesheet" type="text/css" href="../../bs3/css/WdatePicker.css" />
  <link rel="stylesheet" type="text/css" href="../../bs3/css/skin_/form.css" />
  <link href="umeditor/themes/default/_css/umeditor.css" type="text/css" rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="../../bs3/css/jquery.grid.css" />
  <link rel="stylesheet" type="text/css" href="../../bs/css/bootstrap.min.css">

  <script type="text/javascript" src="../../bs3/js/jquery.js">
  </script>
  <script type="text/javascript" src="../../bs3/js/global.js">
  </script>
  <script type="text/javascript" src="../../bs3/js/jquery.select.js">
  </script>
  <script type="text/javascript" src="../../bs3/js/WdatePicker.js">
  </script>
  <script type="text/javascript">
    window.UMEDITOR_HOME_URL = 'umeditor/';  // 请换成绝对路径
  </script>
  <script type="text/javascript" src="../../bs3/js/umeditor.config.js">
  </script>
  <script type="text/javascript" src="../../bs3/js/editor_api.js">
  </script>
  <script type="text/javascript" src="../../bs3/umeditor/lang/zh-cn/zh-cn.js">
  </script>
  <title>
    视频列表
  </title>
</head>

<body>
  <div id="container">
    <div id="hd">
    </div>
    <div id="bd">
      <form class="form-signin" role="form" action="/admin/video/video_add" enctype="multipart/form-data" method="post">
        <div id="main">
          <h2 class="subfild">
            <span>
              视频信息
            </span>
          </h2>
          <div class="subfild-content base-info">

            <table style="margin-top:-20px;table-layout:fixed;"  class="table table-striped"  width="100%">
              <tr>
                <td width="40%">
                  <div class="kv-item ue-clear">
                    <input type="hidden" placeholder="节目编号" name="id" maxlength="30" th:value="${movie.id}"/>
                    <label>                      
                      影片名称:
                    </label>
                    <div class="kv-item-content" >
                      <h6>
                        <p th:text="${movie.vname}">
                          影片名称:
                        </p>
                      </h6>
                    </div>
                  </div>
                </td>
                <td width="40%">
                  <div class="kv-item ue-clear time">
                    <label>                     
                      影片类型:
                    </label>
                    <div class="kv-item-content">
                      <h6>
                        <p th:text="${movie.vtype}">
                          影片名称:
                        </p>
                      </h6>
                    </div>
                  </div>
                </td>
              </tr>

              <tr>
                <td width="40%">
                  <div class="kv-item ue-clear">
                    <label>
                      所在栏目
                    </label>
                    <div class="kv-item-content">
                      <h6>
                        <label th:switch="${movie.ptype}">
                          <p th:case="'3'">影视专区</p>
                        </label>
                      </h6>
                    </div>
                  </div>
                </td>
                <td width="40%">
                  <div class="kv-item ue-clear time">
                    <label>
                      <span class="impInfo">
                        *
                      </span>
                      视频时长:
                    </label>
                    <div class="kv-item-content">
                      <h6>
                        <label th:text="${movie.vtime}">
                          影片名称:
                        </label>
                        分钟
                      </h6>
                    </div>
                  </div>
                </td>
              </tr>
              
              <tr>
                <td width="40%">
                  <div class="kv-item ue-clear time">
		              <label>
		                <span class="impInfo">
		                  *
		                </span>
		                上映日期:
		              </label>
		              <div class="kv-item-content">
		                <h6>
		                  <label th:text="${movie.releasetime}">
		                    影片名称:
		                  </label>
		                </h6>
		              </div>
		            </div>
                </td>
                <td width="40%">
                   <div class="kv-item ue-clear">
		              <label>
		                地区:
		              </label>
		              <div class="kv-item-content">
		                <h6>
		                  <label th:text="${movie.region}">
		                    影片名称:
		                  </label>
		                </h6>
		              </div>
		            </div>
                </td>
              </tr>
              
              <tr>
                <td width="40%">
                  <div class="kv-item ue-clear">
		              <label>		                
		                导演:
		              </label>
		              <div class="kv-item-content">
		                <h6>
		                  <p th:text="${movie.director}">
		                    影片名称:
		                  </p>
		                </h6>
		              </div>
		            </div>
                </td>
                <td width="40%">
		                  <div class="kv-item ue-clear">
		              <label>		               
		                主演:
		              </label>
		              <div class="kv-item-content">
		                <h6>
		                  <p th:text="${movie.tostar}">
		                    影片名称:
		                  </p>
		                </h6>
		              </div>
		            </div>
                </td>
              </tr>
              
              <tr>
                <td width="40%">
		                   <div class="kv-item ue-clear">
		              <label>
		                <span class="impInfo">
		                  *
		                </span>
		                总集数:
		              </label>
		              <div class="kv-item-content">
		                <h6>
		                  <label  th:text="${movie.sylloge}">
		                    影片名称:
		                  </label>
		                </h6>
		              </div>
		            </div>
                </td>
                <td width="40%">
		                 <div class="kv-item ue-clear">
              <label>
                <span class="impInfo">
                  *
                </span>
                更新数:
              </label>
              <div class="kv-item-content">
                <h6>
                  <label th:text="${movie.updatetext}">
                    影片名称:
                  </label>
                </h6>
              </div>
            </div>
                </td>
              </tr>
              <tr>
                <td colspan="2" >
		                  <h2 class="subfild">
              <span>
                影片简介
              </span>
            </h2>
            <div class="subfild-content remarkes-info">                            
                <div class="kv-item-content">
                  <h6>
                    <p style="width:100%;" th:text="${movie.synopsis}">
                      影片名称:
                    </p>
                  </h6>
                </div>             
            </div>
                </td>
              </tr>
            </table>

            <h2 class="subfild">
              <span>
                剧集列表
              </span>
            </h2>
            <div class="kv-item ue-clear">
              <table style="margin-top:-20px;table-layout:fixed;"  class="table table-striped"  width="100%" >
	                <thead class="thead-light">
	                <tr >
	                <th scope="col">编号</td>
	                <th scope="col">剧集</td>
	                <th scope="col">标签</td>
	                <th scope="col">显示标签</td>	                
	                <th scope="col">备注</td>
	                	                
	              <!--  <th scope="col">备注</td> --> 
	                <th text-align="center" width="300px" >操作</td>	               
	                </tr>
	                </thead>
	                <tbody>
	                <tr th:each="obj:${objs}">
	                <td class="ui-table-td" th:text="${obj.id}">111</td>	               
	                <td th:text="${obj.vname}">2asdfasdf</td>
	                <td th:text="${obj.sname}">2asdfasdf</td>	
	                <td th:text="${obj.vlable}">1</td>
	                <td th:text="${obj.vremark}">1</td>	               
	                
	                <td ><a th:href="@{/admin/video/movie_play(vid=${movie.id},vname=${obj.vname})}">预览</a>
	                <!-- &nbsp;&nbsp;<a th:href="@{/admin/video/loadvideo(id=${obj.id})}">添加剧集</a>
	                &nbsp;&nbsp;<a th:href="@{/admin/movie/movie_update_load(id=${obj.id})}">修改</a>&nbsp;&nbsp;
	                <a th:href="@{/admin/movie/movie_del(id=${obj.id})}">删除</a>	  -->               
	                </td>	                
	               
	                </tr>
	                </tbody>
	                </table>

            <div class="buttons">
            <!--   <input class="button" type="submit" value="提交" />  -->
              <a class="button btn btn-primary" href="/admin/movie/loadmovies;" >
                返回
              </a>
            </div>
          </div>
        </form>
      </div>
    </div>
  </body>
  <script>
    var eleFile = document.querySelector('.file');
    var image = document.querySelector("img")
    var button = document.querySelector("button")
    // 压缩图片需要的一些元素和对象
    var targetWidth, targetHeight
    var reader = new FileReader(),
    img = new Image();

    // 选择的文件对象
    var file = null;

    // base64地址图片加载完毕后
    img.onload = function () {
      // 图片原始尺寸
      var originWidth = this.width;
      var originHeight = this.height;
      // 最大尺寸限制
      var maxWidth = 600,
      maxHeight = 500;
      // 目标尺寸
      targetWidth = originWidth,
      targetHeight = originHeight;
      // 图片尺寸超过400x400的限制
      if (originWidth > maxWidth || originHeight > maxHeight) {
        if (originWidth / originHeight > maxWidth / maxHeight) {
          // 更宽，按照宽度限定尺寸
          targetWidth = maxWidth;
          targetHeight = Math.round(targetWidth* (originHeight / originWidth));
        } else {
          targetHeight = maxHeight;
          targetWidth = Math.round(targetHeight* (originWidth / originHeight));
        }
      }
      image.width = targetWidth
      image.height = targetHeight
      };

      // 文件base64化，以便获知图片原始尺寸
      reader.onload = function (e) {
        img.src = e.target.result;
        image.src = e.target.result
        };
        eleFile.addEventListener('change', function (event) {
          file = event.target.files[0];
          // 选择的文件是图片
          if (file.type.indexOf("image") == 0) {
            reader.readAsDataURL(file);
          }
          });
          button.addEventListener('click', function () {
            if (!file) {
              return
            }
            var formData = new FormData()
            formData.append(file.name, file)
            uploadImage(formData)
            })

            function uploadImage(formdata) {
              // ....调用ajax上传图片
            }
          </script>
        </html>
